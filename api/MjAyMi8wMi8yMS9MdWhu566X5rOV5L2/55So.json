{"title":"Luhn算法使用","date":"2022-02-21T11:30:00.000Z","date_formatted":{"ll":"2022年2月21日","L":"2022/02/21","MM-DD":"02-21"},"link":"2022/02/21/Luhn算法使用","tags":["算法"],"categories":["工作"],"updated":"2024-10-10T08:03:05.450Z","content":"<p>银行卡号码的校验采用Luhn算法，校验过程大致如下：</p>\n<ol>\n<li>\n<p>从右到左给卡号字符串编号，最右边第一位是1，最右边第二位是2，最右边第三位是3….</p>\n</li>\n<li>\n<p>从右向左遍历，对每一位字符t执行第三个步骤，并将每一位的计算结果相加得到一个数s。</p>\n</li>\n<li>\n<p>对每一位的计算规则：如果这一位是奇数位，则返回t本身，如果是偶数位，则先将t乘以2得到一个数n，如果n是一位数（小于10），直接返回n，否则将n的个位数和十位数相加返回。</p>\n</li>\n<li>\n<p>如果s能够整除10，则此号码有效，否则号码无效。</p>\n</li>\n</ol>\n<p>因为最终的结果会对10取余来判断是否能够整除10，所以又叫做模10算法。<span id=\"more\"></span></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Boolean <span class=\"title\">validCheckNum</span><span class=\"params\">(String cardNo)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= cardNo.length(); i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> unit = cardNo.charAt(i-<span class=\"number\">1</span>) - <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((i &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            unit = unit * <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (unit &gt; <span class=\"number\">9</span>) &#123;</span><br><span class=\"line\">                unit = unit / <span class=\"number\">10</span> + unit % <span class=\"number\">10</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        sum += unit;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum % <span class=\"number\">10</span> == <span class=\"number\">0</span> ? Boolean.TRUE : Boolean.FALSE;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>计算校验码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; cardNo.length(); i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> unit = cardNo.charAt(cardNo.length()-<span class=\"number\">1</span> - i) - <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((i &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unit &lt; <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">            sum += unit * <span class=\"number\">2</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            sum += unit * <span class=\"number\">2</span> - <span class=\"number\">9</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        sum += unit;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">int</span> remainder = sum % <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h2>\n<p><a href=\"https://codeantenna.com/a/RYnbVRL7KZ\" target=\"_blank\">银行卡号码的校验规则(Luhn算法/模10算法) - CodeAntenna</a></p>\n","prev":{"title":"Host文件修改不生效","link":"2023/03/18/Host文件修改不生效"},"next":{"title":"循环链表实践","link":"2022/01/20/循环链表实践"},"plink":"https://zinki.github.io/2022/02/21/Luhn算法使用/","toc":[{"id":"参考","title":"参考","index":"1"}]}
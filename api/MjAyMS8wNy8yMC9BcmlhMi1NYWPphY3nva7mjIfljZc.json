{"title":"Aria2-Mac配置指南","date":"2021-07-20T10:30:00.000Z","date_formatted":{"ll":"2021年7月20日","L":"2021/07/20","MM-DD":"07-20"},"link":"2021/07/20/Aria2-Mac配置指南","tags":["Aria2"],"categories":["学习"],"updated":"2024-10-10T08:03:05.437Z","content":"<p>Aria2是一个轻量级、支持多种协议的命令行下载工具。</p>\n<ul>\n<li>支持的协议包括HTTP(S), FTP, BitTorrent, Metalink</li>\n<li>aria2可以并发的进行下载，并尝试将下载带宽利用率最大化</li>\n<li>分片与续传，自动中止并替换慢的线程<br>\n另外，Aria2可以实现百度网盘，迅雷等离线下载<span id=\"more\"></span></li>\n</ul>\n<h3 id=\"安装\">安装<a title=\"#安装\" href=\"#安装\"></a></h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ brew install aria2</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置\">配置<a title=\"#配置\" href=\"#配置\"></a></h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">$ mkdir .aria2</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> .aria2</span><br><span class=\"line\">$ touch aria2.conf</span><br></pre></td></tr></table></figure>\n<p>aria2有两个模式，第一个没有后台在命令行里运行的，第二个就是 rpc 模式。</p>\n<p>可以设置aria2.conf文件如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#用户名</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-user=user</span></span><br><span class=\"line\"><span class=\"comment\">#密码</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-passwd=passwd</span></span><br><span class=\"line\"><span class=\"comment\">#上面的认证方式不建议使用,建议使用下面的token方式</span></span><br><span class=\"line\"><span class=\"comment\">#设置加密的密钥</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-secret=token</span></span><br><span class=\"line\"><span class=\"comment\">#允许rpc</span></span><br><span class=\"line\">enable-rpc=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#允许所有来源, web界面跨域权限需要</span></span><br><span class=\"line\">rpc-allow-origin-all=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#允许外部访问，false的话只监听本地端口</span></span><br><span class=\"line\">rpc-listen-all=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#RPC端口, 仅当默认端口被占用时修改</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-listen-port=6800</span></span><br><span class=\"line\"><span class=\"comment\">#最大同时下载数(任务数), 路由建议值: 3</span></span><br><span class=\"line\">max-concurrent-downloads=5</span><br><span class=\"line\"><span class=\"comment\">#断点续传</span></span><br><span class=\"line\"><span class=\"built_in\">continue</span>=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#同服务器连接数</span></span><br><span class=\"line\">max-connection-per-server=5</span><br><span class=\"line\"><span class=\"comment\">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</span></span><br><span class=\"line\">min-split-size=10M</span><br><span class=\"line\"><span class=\"comment\">#单文件最大线程数, 路由建议值: 5</span></span><br><span class=\"line\">split=10</span><br><span class=\"line\"><span class=\"comment\">#下载速度限制</span></span><br><span class=\"line\">max-overall-download-limit=0</span><br><span class=\"line\"><span class=\"comment\">#单文件速度限制</span></span><br><span class=\"line\">max-download-limit=0</span><br><span class=\"line\"><span class=\"comment\">#上传速度限制</span></span><br><span class=\"line\">max-overall-upload-limit=0</span><br><span class=\"line\"><span class=\"comment\">#单文件速度限制</span></span><br><span class=\"line\">max-upload-limit=0</span><br><span class=\"line\"><span class=\"comment\">#断开速度过慢的连接</span></span><br><span class=\"line\"><span class=\"comment\">#lowest-speed-limit=0</span></span><br><span class=\"line\"><span class=\"comment\">#验证用，需要1.16.1之后的release版本</span></span><br><span class=\"line\"><span class=\"comment\">#referer=*</span></span><br><span class=\"line\"><span class=\"comment\">#文件保存路径, 默认为当前启动位置</span></span><br><span class=\"line\">dir=/Users/xxx/Downloads</span><br><span class=\"line\"><span class=\"comment\">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</span></span><br><span class=\"line\"><span class=\"comment\">#disk-cache=0</span></span><br><span class=\"line\"><span class=\"comment\">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</span></span><br><span class=\"line\"><span class=\"comment\">#enable-mmap=true</span></span><br><span class=\"line\"><span class=\"comment\">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</span></span><br><span class=\"line\"><span class=\"comment\">#所需时间 none &lt; falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持</span></span><br><span class=\"line\">file-allocation=prealloc</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动\">启动<a title=\"#启动\" href=\"#启动\"></a></h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ aria2c --conf-path=<span class=\"string\">&quot;/Users/xxxxxx/.aria2/aria2.conf&quot;</span> -D</span><br></pre></td></tr></table></figure>\n<h3 id=\"关闭\">关闭<a title=\"#关闭\" href=\"#关闭\"></a></h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在终端输入 ps aux|grep aria2 获取到进程号，然后使用 <span class=\"built_in\">kill</span> number 回车即可杀掉它</span><br></pre></td></tr></table></figure>\n<p>Aria2支持WebUI,谷歌插件等，可以酌情配置</p>\n<h3 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h3>\n<p><a href=\"https://aria2.github.io/\" target=\"_blank\">Aria2官网</a><br>\n<a href=\"http://aria2c.com/archiver/aria2.conf\" target=\"_blank\">Aria2配置示例</a><br>\n<a href=\"http://aria2.net/#!/downloading\" target=\"_blank\">Aria2WebUI</a></p>\n","prev":{"title":"Git批量更新脚本","link":"2021/08/19/git批量更新脚本"},"next":{"title":"证书及密钥相关概念","link":"2021/06/20/证书及密钥相关概念"},"plink":"https://zinki.github.io/2021/07/20/Aria2-Mac配置指南/","toc":[{"id":"安装","title":"安装","index":"1"},{"id":"配置","title":"配置","index":"2"},{"id":"启动","title":"启动","index":"3"},{"id":"关闭","title":"关闭","index":"4"},{"id":"参考","title":"参考","index":"5"}]}
{"title":"如何删除服务器攻击脚本","date":"2020-12-11T07:30:00.000Z","date_formatted":{"ll":"2020年12月11日","L":"2020/12/11","MM-DD":"12-11"},"link":"2020/12/11/如何删除服务器攻击脚本","tags":["bash"],"categories":["学习"],"updated":"2024-10-10T08:03:05.465Z","content":"<p>阿里云上的redis因为端口暴露被攻击，本地有份攻击脚本需要删除。<span id=\"more\"></span><br>\n删除时报Operation not permitted，用sudo也不行</p>\n<p>解决方法<br>\n上面我们执行的chmod命令，其底层实现是chattr命令，用此命的功能更为强大，甚至可以锁定文件，即使root用户也操作不了此文件。</p>\n<p>chattr是用来更改文件属性，lsattr可用来查看文件的属性，执行命令lsattr /webapps/.usr.ini便可以看到当前文件的属性；</p>\n<p>可以发现当前文件有个i属性，查阅命令帮助文档可以看到有i属性的文件是不能修改的，更不可被删除，即使是root用户也不可。</p>\n<p>既然知道了文件不能删除的原因是加了i属性，所以相应的解决方案就是把文件的i属性去除，然后再删除。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//去除i属性</span><br><span class=\"line\">chattr -i webapps  </span><br><span class=\"line\">//删除文件夹</span><br><span class=\"line\">rm -rf webapps      </span><br></pre></td></tr></table></figure>\n","prev":{"title":"Kafka相关知识","link":"2021/02/17/Kafka相关知识"},"next":{"title":"Onedrive如何备份","link":"2020/11/27/Onedrive如何备份"},"plink":"https://zinki.github.io/2020/12/11/如何删除服务器攻击脚本/"}
{"title":"Nginx部署实践","date":"2017-11-27T11:30:00.000Z","date_formatted":{"ll":"2017年11月27日","L":"2017/11/27","MM-DD":"11-27"},"link":"2017/11/27/Nginx部署实践","tags":["Nginx"],"categories":["学习"],"updated":"2024-10-11T04:20:20.912Z","content":"<p>Nginx是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。<span id=\"more\"></span></p>\n<h2 id=\"模块依赖\">模块依赖<a title=\"#模块依赖\" href=\"#模块依赖\"></a></h2>\n<p>nginx安装需要以下模块<br>\ngzip模块需要 zlib 库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install zlib1g-dev</span><br></pre></td></tr></table></figure>\n<p>rewrite模块需要 pcre 库<br>\nssl 功能需要openssl库</p>\n<h2 id=\"编译环境\">编译环境<a title=\"#编译环境\" href=\"#编译环境\"></a></h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install build-essential</span><br></pre></td></tr></table></figure>\n<p>下载nginx软件包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://nginx.org/download/nginx-1.10.0.tar.gz</span><br></pre></td></tr></table></figure>\n<p>解压</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf nginx-1.10.0.tar.gz</span><br></pre></td></tr></table></figure>\n<p>编译</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/usr/local/src# cd nginx-1.10.0</span><br><span class=\"line\">./configure --prefix=/usr/local/nginx</span><br><span class=\"line\">make all</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>安装成功<br>\n启动</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/usr/local/nginx/sbin# ./nginx</span><br></pre></td></tr></table></figure>\n<p>查询nginx主进程号</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep nginx</span><br><span class=\"line\">从容停止   kill -QUIT 主进程号</span><br><span class=\"line\">快速停止   kill -TERM 主进程号</span><br><span class=\"line\">强制停止   kill -9 nginx</span><br></pre></td></tr></table></figure>\n<p>若nginx.conf配置了pid文件路径，如果没有，则在logs目录下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kill -信号类型 &#x27;/usr/local/nginx/logs/nginx.pid&#x27; </span><br><span class=\"line\">nginx -t 测试配置文件是否正确</span><br><span class=\"line\">nginx -s reload 重新启动</span><br><span class=\"line\">nginx -s stop</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>根据实验，nginx的后缀匹配会将请求的路径追加到root/alias后面</p>\n<p>nginx的正则使用PCRE（Perl Compatible Regular Expressions）<br>\n<img src=\"http://zeven.site:7521/2024/10/202410111003887.png\" alt=\"\" loading=\"lazy\"></p>\n<h2 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h2>\n<p><a href=\"http://nginx.org/en/download.html\" target=\"_blank\">Nginx官网</a></p>\n","prev":{"title":"深入分析ReentrantLock","link":"2017/12/13/深入分析ReentrantLock"},"next":{"title":"跨域及解决方案","link":"2017/11/05/跨域及解决方案"},"plink":"https://zinki.github.io/2017/11/27/Nginx部署实践/","toc":[{"id":"模块依赖","title":"模块依赖","index":"1"},{"id":"编译环境","title":"编译环境","index":"2"},{"id":"参考","title":"参考","index":"3"}]}
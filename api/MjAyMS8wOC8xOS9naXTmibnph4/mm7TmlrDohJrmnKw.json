{"title":"Git批量更新脚本","date":"2021-08-19T08:10:00.000Z","date_formatted":{"ll":"2021年8月19日","L":"2021/08/19","MM-DD":"08-19"},"link":"2021/08/19/git批量更新脚本","tags":["git"],"categories":["学习"],"updated":"2024-10-10T08:03:05.462Z","content":"<p>随着本地项目越来越多，手动项目更新导致很多项目不是最新的，调试会出现问题，故参考网上博客写了批量更新脚本以方便批量操作。<span id=\"more\"></span></p>\n<h3 id=\"windows脚本\">Windows脚本<a title=\"#windows脚本\" href=\"#windows脚本\"></a></h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo off</span><br><span class=\"line\">set pa=%cd%</span><br><span class=\"line\">echo %pa%</span><br><span class=\"line\">for /d %%s in (*)do (</span><br><span class=\"line\">\techo.</span><br><span class=\"line\">\techo.</span><br><span class=\"line\">\techo %%s git...pull....</span><br><span class=\"line\">\tcd %pa%\\%%s</span><br><span class=\"line\">\tgit pull</span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<h3 id=\"shell脚本\">Shell脚本<a title=\"#shell脚本\" href=\"#shell脚本\"></a></h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"># 获取 git 仓库路径</span><br><span class=\"line\">for LINE in $(find `pwd` -type d -name &quot;.git&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">do echo &quot;$LINE&quot;;</span><br><span class=\"line\">cd &quot;$LINE&quot;</span><br><span class=\"line\">cd ..</span><br><span class=\"line\"># 切换分支</span><br><span class=\"line\">branch_name=&quot;release&quot;</span><br><span class=\"line\">if [ &quot;$(git branch --show-current)&quot; = &quot;$branch_name&quot; ] || [ &quot;$(git branch --show-current)&quot; = &quot;master&quot; ];</span><br><span class=\"line\">then</span><br><span class=\"line\">\techo &quot;Branch already switch.&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">\tif [ `git branch --list &quot;$branch_name&quot;` ]</span><br><span class=\"line\">\tthen</span><br><span class=\"line\">\t\techo &quot;switch branch name $branch_name.&quot;</span><br><span class=\"line\">\t\tgit checkout $branch_name</span><br><span class=\"line\">\telse</span><br><span class=\"line\">\t\techo &quot;switch branch name master.&quot;</span><br><span class=\"line\">\t\tgit checkout master</span><br><span class=\"line\">\tfi</span><br><span class=\"line\">fi</span><br><span class=\"line\"># 更新</span><br><span class=\"line\">git pull;</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h3>\n<p><a href=\"https://www.shuzhiduo.com/A/GBJrv7WRJ0/\" target=\"_blank\">【Git/GitHub学习笔记】一键更新多个git仓库至远程</a></p>\n","prev":{"title":"线程池及异步使用","link":"2021/08/29/线程池及异步使用"},"next":{"title":"Aria2-Mac配置指南","link":"2021/07/20/Aria2-Mac配置指南"},"plink":"https://zinki.github.io/2021/08/19/git批量更新脚本/","toc":[{"id":"windows脚本","title":"Windows脚本","index":"1"},{"id":"shell脚本","title":"Shell脚本","index":"2"},{"id":"参考","title":"参考","index":"3"}]}
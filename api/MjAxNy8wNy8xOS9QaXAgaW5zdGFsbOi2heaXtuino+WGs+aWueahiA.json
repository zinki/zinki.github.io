{"title":"Pip install超时解决方案","date":"2017-07-19T07:42:00.000Z","date_formatted":{"ll":"2017年7月19日","L":"2017/07/19","MM-DD":"07-19"},"link":"2017/07/19/Pip install超时解决方案","tags":["pip install"],"categories":["学习"],"updated":"2024-10-10T08:03:05.456Z","content":"<p>pip install会出现连接超时解决方案<span id=\"more\"></span></p>\n<h2 id=\"原因\">原因<a title=\"#原因\" href=\"#原因\"></a></h2>\n<p>采用默认的pypi源(国外的pypi源)，这个很容易出现这种连接超时的问题，所以应当采用国内的镜像源,一些国内常用的pypi源如下：</p>\n<p>阿里云 <a href=\"http://mirrors.aliyun.com/pypi/simple/\" target=\"_blank\">http://mirrors.aliyun.com/pypi/simple/</a></p>\n<p>中国科技大学 <a href=\"https://pypi.mirrors.ustc.edu.cn/simple/\" target=\"_blank\">https://pypi.mirrors.ustc.edu.cn/simple/</a></p>\n<p>豆瓣(douban) <a href=\"http://pypi.douban.com/simple/\" target=\"_blank\">http://pypi.douban.com/simple/</a></p>\n<p>清华大学 <a href=\"https://pypi.tuna.tsinghua.edu.cn/simple/\" target=\"_blank\">https://pypi.tuna.tsinghua.edu.cn/simple/</a></p>\n<p>中国科学技术大学 <a href=\"http://pypi.mirrors.ustc.edu.cn/simple/\" target=\"_blank\">http://pypi.mirrors.ustc.edu.cn/simple/</a></p>\n<h2 id=\"解决办法\">解决办法<a title=\"#解决办法\" href=\"#解决办法\"></a></h2>\n<p>在你需要安装的xx后面添加-i + pypi源：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install xx -i [http://pypi.douban.com/simple/](http://pypi.douban.com/simple/)</span><br></pre></td></tr></table></figure>\n<p>如果还出现下面的情况：</p>\n<p><a href=\"http://pypi.douban.com\">pypi.douban.com</a> is not a trusted or secure host and is being ignored…</p>\n<p>那么命令就变成这样：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install xx -i [http://pypi.douban.com/simple](http://pypi.douban.com/simple) --trusted-host pypi.douban.com</span><br></pre></td></tr></table></figure>\n<p>这样就可以解决，但是这样需要每次在后面添加-i <a href=\"http://pypi.douban.com/simple\" target=\"_blank\">http://pypi.douban.com/simple</a> --trusted-host pypi.douban.com这么一长串的后缀，那么问题来了，我们可不可以设置修改默认的pypi源呢？答案是肯定的，下面就教你如何配置。</p>\n<p>修改默认pypi源</p>\n<p>在liunx环境下，在当前的虚拟环境下面新建pip.conf文件:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~/.pip/pip.conf</span><br></pre></td></tr></table></figure>\n<p>在windows环境下，在当前的虚拟环境下面的pip文件夹新建pip.ini，并配置系统环境变量：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">%HOMEPATH%\\\\pip\\\\pip.ini</span><br></pre></td></tr></table></figure>\n<p>在上面2个文件夹里面写入这些代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[global]</span><br><span class=\"line\">#这个pypi源自己定义</span><br><span class=\"line\">index-url = https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class=\"line\">[install]</span><br><span class=\"line\">trusted-host=pypi.tuna.tsinghua.edu.cn  # 这个也是根据pypi源自己定义</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>现在使用pip来安装时，就会默认调用该镜像，你不需要再添加那些后缀了。当然如果你想临时修改某个pypi源，（不想用清华镜像，想用豆瓣镜像）这也是可以的，操作方法如下：</p>\n<p>在前面添加如下代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import os</span><br><span class=\"line\">package = raw_input(&quot;Please input the package which you want to install：\\\\n&quot;)</span><br><span class=\"line\">command = &quot;pip install %s -i [http://pypi.douban.com/simple/](http://pypi.douban.com/simple/) --trusted-host pypi.douban.com&quot; % package</span><br><span class=\"line\">os.system(command)</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h2>\n<p><a href=\"https://blog.csdn.net/licheetools/article/details/82946342\" target=\"_blank\">使用默认pypi源出现连接超时的解决办法</a></p>\n","prev":{"title":"Kubernetes基本概念","link":"2017/07/27/Kubernetes基本概念"},"next":{"title":"PlantUML简明教程","link":"2017/07/03/PlantUML简明教程"},"plink":"https://zinki.github.io/2017/07/19/Pip install超时解决方案/","toc":[{"id":"原因","title":"原因","index":"1"},{"id":"解决办法","title":"解决办法","index":"2"},{"id":"参考","title":"参考","index":"3"}]}
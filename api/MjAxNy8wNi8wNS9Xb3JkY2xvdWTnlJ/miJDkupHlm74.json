{"title":"利用wordcloud生成云图","date":"2017-06-05T09:04:00.000Z","date_formatted":{"ll":"2017年6月5日","L":"2017/06/05","MM-DD":"06-05"},"link":"2017/06/05/Wordcloud生成云图","tags":["Python","WordCloud"],"categories":["学习"],"updated":"2024-11-02T11:31:53.912Z","content":"<p>最近学习了Python的语法,写了个生成云图的小demo. <span id=\"more\"></span></p>\n<h2 id=\"代码在jupyter-notebook上运行\">代码在Jupyter Notebook上运行<a title=\"#代码在jupyter-notebook上运行\" href=\"#代码在jupyter-notebook上运行\"></a></h2>\n<h3 id=\"安装执行\">安装执行<a title=\"#安装执行\" href=\"#安装执行\"></a></h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m pip install –upgrade pip</span><br><span class=\"line\">python -m pip install jupyter</span><br></pre></td></tr></table></figure>\n<h3 id=\"首先读取文本\">首先读取文本<a title=\"#首先读取文本\" href=\"#首先读取文本\"></a></h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">filename = &quot;E:\\codeStyle.txt&quot;</span><br><span class=\"line\">with open(filename,encoding=&#x27;utf-8&#x27;) as f:</span><br><span class=\"line\">    mytext = f.read()</span><br></pre></td></tr></table></figure>\n<h3 id=\"通过jieba分词\">通过jieba分词<a title=\"#通过jieba分词\" href=\"#通过jieba分词\"></a></h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import jieba</span><br><span class=\"line\">mytext = &quot;&quot;.join(jieba.cut(mytext))</span><br></pre></td></tr></table></figure>\n<h3 id=\"接下来就是用wordcloud生成云图了\">接下来就是用wordcloud生成云图了<a title=\"#接下来就是用wordcloud生成云图了\" href=\"#接下来就是用wordcloud生成云图了\"></a></h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from wordcloud import WordCloud</span><br><span class=\"line\">import imageio</span><br><span class=\"line\">from os import path</span><br><span class=\"line\">#path.join(path.dirname(__file__),&quot;timg.jpg&quot;)</span><br><span class=\"line\">trump_coloring = imageio.imread(path.join(path.abspath(&#x27;.&#x27;),&quot;E:\\\\timg.jpg&quot;))</span><br><span class=\"line\">wordcloud = WordCloud(font_path=&quot;E:\\\\simsun.ttf&quot;,</span><br><span class=\"line\">                      margin=5,</span><br><span class=\"line\">                      width=1800,</span><br><span class=\"line\">                      height=800,</span><br><span class=\"line\">                      background_color=&quot;white&quot;,</span><br><span class=\"line\">                      max_words=300,</span><br><span class=\"line\">                      mask=trump_coloring,</span><br><span class=\"line\">                      max_font_size=40,</span><br><span class=\"line\">                      random_state=42).generate(mytext)</span><br><span class=\"line\">import matplotlib.pyplot as plt</span><br><span class=\"line\">#%pylab inline  这行会报提示&quot;Populating the interactive namespace from numpy and matplotlib&quot;</span><br><span class=\"line\">plt.imshow(wordcloud, interpolation=&#x27;bilinear&#x27;)</span><br><span class=\"line\">wordcloud.to_file(&#x27;E:\\\\output.png&#x27;)</span><br><span class=\"line\">plt.axis(&quot;off&quot;)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://web.zeven.site/2024/10/202410111012004.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"这里面有几个坑\">这里面有几个坑<a title=\"#这里面有几个坑\" href=\"#这里面有几个坑\"></a></h2>\n<ol>\n<li>必须是实际存在的.py文件，如果在命令行执行，则会引发异常NameError: name file is not defined；应该结合os.path.abspath()使用</li>\n<li>如果报类似”ImportError: No module named scipy.misc”这样的异常,就用pip安装对应的组件</li>\n<li>默认字体不支持中文,我们需要自己下载字体放到当前目录</li>\n</ol>\n","prev":{"title":"SpringBoot获取配置信息","link":"2017/06/15/SpringBoot获取配置信息"},"next":{"title":"常用lambda表达式","link":"2017/05/30/常用lamda表达式"},"plink":"https://zinki.github.io/2017/06/05/Wordcloud生成云图/","toc":[{"id":"代码在jupyter-notebook上运行","title":"代码在Jupyter Notebook上运行","index":"1","children":[{"id":"安装执行","title":"安装执行","index":"1.1"},{"id":"首先读取文本","title":"首先读取文本","index":"1.2"},{"id":"通过jieba分词","title":"通过jieba分词","index":"1.3"},{"id":"接下来就是用wordcloud生成云图了","title":"接下来就是用wordcloud生成云图了","index":"1.4"}]},{"id":"这里面有几个坑","title":"这里面有几个坑","index":"2"}]}